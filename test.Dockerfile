FROM influx6/lxcontains-ubuntu

ADD . /go/src/github.com/honeytrap/honeytrap

WORKDIR /go/src/github.com/honeytrap/honeytrap

RUN go test -v ./director/...
RUN go test -v ./protocol/...
RUN go test -v ./providers/...
RUN go test -v ./proxies/...
RUN go test -v ./pushers/...
RUN go test -v ./server/...
RUN go test -v ./sniffer/...
RUN go test -v ./utils/...

RUN bash -c "mkdir -p /honeytrap"
RUN cp config.toml.sample /honeytrap/config.toml
